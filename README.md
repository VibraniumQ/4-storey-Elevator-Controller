# Last_Try

## 设计原理

### 设计思路

电梯控制器由四部分组成——计数器、请求处理、状态控制、显示接口。  
计数器部分包括：分频器、楼层转换计时器、开门计时器、延迟关门按钮。分频器用于将系统时钟频率降为4Hz，供给其他计时器模块使用。楼层转换计时器模块接收楼层变更信号，在电梯移动（上移或下移）结束后输出移动结束脉冲信号，告知状态控制模块电梯已经到达下一楼层。开门计时器模块在接收到开门信号后开始计时，随时间推移变更门指示灯显示，并在关门后发出信号告知状态控制模块电梯开门过程已结束，同时开门计时器也负责处理延迟关门与提前关门信号并作出相应的动作。延迟关门按钮模块是由于延迟关门动作较复杂而衍生的模块，接收延迟关门按钮信号，实现在人手松开按钮后5秒之后再进行关门的功能。  
显示接口部分包括：开门指示灯、电梯所在楼层指示灯。开门指示灯模块接收开门计时器给出的电梯门开关状态信号，给出相应的LED灯显示信号。电梯所在楼层指示灯接收状态控制模块给出的电梯所在楼层位置信号，输出相应的七段数码管显示。  
请求处理部分包括：电梯外请求接口、请求处理模块。电梯外请求接口接收电梯外按键信号，上、下行共6个1位信号转化为两组4位信号传递给请求处理模块。请求处理模块根据电梯电梯所在位置，给出当前模式下有效请求并判断当前运行模式，传递给状态控制模块。  
状态控制部分仅由状态控制模块构成。状态控制模块一方面接受有效请求与运行模式信号，对电梯的运行状态进行控制，另一方面在控制电梯状态转移的过程中给出开门指令与移动指令，并接收移动完毕信号与开门完毕信号，作出下一步操作。  